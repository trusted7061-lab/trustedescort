import React, { useState } from 'react'
import { Link } from 'react-router-dom'
import { Helmet } from 'react-helmet-async'
import { motion } from 'framer-motion'

function Home() {
  const [imageIndices, setImageIndices] = useState({ 1: 0, 2: 0, 3: 0 })
  const [searchCity, setSearchCity] = useState('')
  const [showSuggestions, setShowSuggestions] = useState(false)
  
  const cities = [
    'Mumbai', 'Delhi', 'Bangalore', 'Hyderabad', 'Pune', 'Goa',
    'Chennai', 'Kolkata', 'Chandigarh', 'Jaipur', 'Indore', 'Ahmedabad',
    'Surat', 'Lucknow', 'Nagpur', 'Visakhapatnam', 'Bhopal', 'Patna',
    'Vadodara', 'Agra', 'Nashik', 'Kochi', 'Coimbatore'
  ]
  
  const filteredCities = cities.filter(city => 
    city.toLowerCase().includes(searchCity.toLowerCase())
  )
  
  const containerVariants = {
    hidden: { opacity: 0 },
    visible: {
      opacity: 1,
      transition: { staggerChildren: 0.1, delayChildren: 0.2 },
    },
  }

  const itemVariants = {
    hidden: { opacity: 0, y: 20 },
    visible: {
      opacity: 1,
      y: 0,
      transition: { duration: 0.5 },
    },
  }

  const reasons = [
    {
      icon: 'üîê',
      title: 'Absolute Discretion',
      description: 'Your privacy is our top priority. Complete confidentiality guaranteed.',
    },
    {
      icon: 'üëë',
      title: 'Luxury Experience',
      description: 'Premium service tailored to your exact desires and preferences.',
    },
    {
      icon: '‚è∞',
      title: '24/7 Availability',
      description: 'Available whenever you need us, day or night, all year round.',
    },
  ]

  const testimonials = [
    {
      name: 'Rahul',
      text: 'An absolutely premium service. The discretion and professionalism are unmatched.',
      rating: 5,
    },
    {
      name: 'Prince',
      text: 'Incredible experience from start to finish. Highly recommended.',
      rating: 5,
    },
    {
      name: 'Devesh',
      text: 'Exceeded all my expectations. Outstanding attention to detail.',
      rating: 5,
    },
  ]

  const featuredEscorts = [
    {
      id: 1,
      name: 'Sakshi',
      age: 24,
      location: 'Mumbai',
      gallery: [
        'https://plus.unsplash.com/premium_photo-1668319914124-57301e0a1850?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
        'https://plus.unsplash.com/premium_photo-1668319915476-5cc7717e00f1?q=80&w=764&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
        'https://plus.unsplash.com/premium_photo-1727943107098-a0fff32b9382?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
      ],
      description: 'Elegant and sophisticated',
    },
    {
      id: 2,
      name: 'Ishita',
      age: 26,
      location: 'Delhi',
      gallery: [
        'https://images.unsplash.com/photo-1604004215656-5ea118076982?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
        'https://images.unsplash.com/photo-1604004215290-46974324f9f5?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
        'https://images.unsplash.com/photo-1604004382469-0eaf9e80a700?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
      ],
      description: 'Charming and witty',
    },
    {
      id: 3,
      name: 'Krina',
      age: 25,
      location: 'Bangalore',
      gallery: [
        'https://plus.unsplash.com/premium_photo-1668485966810-cbd0f685f58f?q=80&w=764&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
        'https://plus.unsplash.com/premium_photo-1668485968552-4ba2424c303b?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
        'https://plus.unsplash.com/premium_photo-1668485968642-30e3d15e9b9c?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
      ],
      description: 'Graceful and alluring',
    },
  ]

  return (
    <>
      {/* Test Element - Remove after debugging */}
      <div style={{ 
        position: 'fixed', 
        top: '0', 
        left: '0', 
        zIndex: 9999, 
        background: 'red', 
        color: 'white', 
        padding: '20px',
        fontSize: '24px'
      }}>
        HOME PAGE IS RENDERING! If you see this, React works.
      </div>
      
      <Helmet>
        <title>Trusted Escort | Exclusive Companionship, Redefined</title>
        <meta name="description" content="Discreet, sophisticated, unforgettable companionship services." />
      </Helmet>

      {/* Hero Section */}
      <section className="relative min-h-screen flex items-center justify-center overflow-hidden pt-20">
        {/* Background Elements */}
        <div className="absolute inset-0 -z-10">
          <motion.div
            animate={{ x: [-20, 20, -20] }}
            transition={{ duration: 8, repeat: Infinity }}
            className="absolute top-20 left-10 w-72 h-72 bg-gold/5 rounded-full filter blur-3xl"
          />
          <motion.div
            animate={{ x: [20, -20, 20] }}
            transition={{ duration: 10, repeat: Infinity }}
            className="absolute bottom-20 right-10 w-96 h-96 bg-gold/5 rounded-full filter blur-3xl"
          />
        </div>

        <div className="max-w-6xl mx-auto px-4 md:px-6 text-center relative z-10">
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.6 }}
          >
            <h1 className="text-5xl md:text-7xl font-serif font-bold mb-6 leading-tight">
              <span className="block text-white mb-2">Exclusive Companionship,</span>
              <span className="gradient-text">Redefined.</span>
            </h1>
          </motion.div>

          <motion.p
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.6, delay: 0.1 }}
            className="text-xl md:text-2xl text-gray-300 mb-8 font-light"
          >
            Discreet, sophisticated, unforgettable.
          </motion.p>

          {/* Search Bar */}
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.6, delay: 0.15 }}
            className="max-w-2xl mx-auto mb-8 relative"
          >
            <div className="relative">
              <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                <svg className="w-5 h-5 text-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
              </div>
              <input
                type="text"
                placeholder="Search by city name..."
                value={searchCity}
                onChange={(e) => {
                  setSearchCity(e.target.value)
                  setShowSuggestions(true)
                }}
                onFocus={() => setShowSuggestions(true)}
                onBlur={() => setTimeout(() => setShowSuggestions(false), 200)}
                className="w-full pl-12 pr-4 py-4 bg-dark-card/80 backdrop-blur-md border border-gold/30 rounded-full text-white placeholder-gray-400 focus:outline-none focus:border-gold focus:ring-2 focus:ring-gold/20 transition-all"
              />
              {searchCity && (
                <button
                  onClick={() => {
                    setSearchCity('')
                    setShowSuggestions(false)
                  }}
                  className="absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gold transition-colors"
                >
                  <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                  </svg>
                </button>
              )}
            </div>

            {/* Suggestions Dropdown */}
            {showSuggestions && searchCity && filteredCities.length > 0 && (
              <motion.div
                initial={{ opacity: 0, y: -10 }}
                animate={{ opacity: 1, y: 0 }}
                className="absolute z-50 w-full mt-2 bg-dark-card/95 backdrop-blur-md border border-gold/30 rounded-2xl shadow-2xl overflow-hidden max-h-64 overflow-y-auto"
              >
                {filteredCities.map((city, index) => (
                  <Link
                    key={city}
                    to={`/companions?location=${city}`}
                    className="block px-6 py-3 hover:bg-gold/10 transition-colors border-b border-gold/10 last:border-b-0"
                  >
                    <div className="flex items-center justify-between">
                      <span className="text-white font-medium">{city}</span>
                      <span className="text-gold text-sm">‚Üí</span>
                    </div>
                  </Link>
                ))}
              </motion.div>
            )}

            {showSuggestions && searchCity && filteredCities.length === 0 && (
              <motion.div
                initial={{ opacity: 0, y: -10 }}
                animate={{ opacity: 1, y: 0 }}
                className="absolute z-50 w-full mt-2 bg-dark-card/95 backdrop-blur-md border border-gold/30 rounded-2xl shadow-2xl p-6 text-center"
              >
                <p className="text-gray-400">No cities found matching "{searchCity}"</p>
              </motion.div>
            )}
          </motion.div>

          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.6, delay: 0.2 }}
            className="flex flex-col md:flex-row gap-4 justify-center"
          >
            <Link to="/escorts">
              <motion.button
                whileHover={{ scale: 1.05 }}
                whileTap={{ scale: 0.95 }}
                className="btn-gold text-lg"
              >
                View Escorts
              </motion.button>
            </Link>
            <Link to="/booking">
              <motion.button
                whileHover={{ scale: 1.05 }}
                whileTap={{ scale: 0.95 }}
                className="btn-outline"
              >
                Book Now
              </motion.button>
            </Link>
          </motion.div>
        </div>

        {/* Scroll Indicator */}
        <motion.div
          animate={{ y: [0, 10, 0] }}
          transition={{ duration: 2, repeat: Infinity }}
          className="absolute bottom-10 left-1/2 transform -translate-x-1/2"
        >
          <svg className="w-6 h-6 text-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 14l-7 7m0 0l-7-7m7 7V3" />
          </svg>
        </motion.div>
      </section>

      {/* Featured Companions Section */}
      <section className="py-20 bg-dark-bg border-t border-gold/10">
        <div className="max-w-6xl mx-auto px-4 md:px-6">
          <motion.div
            variants={containerVariants}
            initial="hidden"
            whileInView="visible"
            viewport={{ once: true }}
            className="text-center mb-12"
          >
            <motion.h2 variants={itemVariants} className="section-title">
              Featured Companions
            </motion.h2>
            <motion.p variants={itemVariants} className="text-gray-400 max-w-2xl mx-auto">
              Discover our selection of exceptional companions, each offering a unique experience tailored to your desires.
            </motion.p>
          </motion.div>

          <motion.div
            variants={containerVariants}
            initial="hidden"
            whileInView="visible"
            viewport={{ once: true }}
            className="grid md:grid-cols-3 gap-8"
          >
            {featuredEscorts.map((escort) => {
              const currentImageIndex = imageIndices[escort.id]
              const currentImage = escort.gallery[currentImageIndex]

              const handleNextImage = (e) => {
                e.preventDefault()
                setImageIndices((prev) => ({
                  ...prev,
                  [companion.id]: (currentImageIndex + 1) % companion.gallery.length,
                }))
              }

              const handlePrevImage = (e) => {
                e.preventDefault()
                setImageIndices((prev) => ({
                  ...prev,
                  [companion.id]:
                    currentImageIndex === 0 ? companion.gallery.length - 1 : currentImageIndex - 1,
                }))
              }

              return (
                <motion.div key={companion.id} variants={itemVariants}>
                  <Link to={`/companion/${companion.id}`}>
                    <motion.div
                      whileHover={{ y: -10 }}
                      className="card-glass overflow-hidden group cursor-pointer"
                    >
                      {/* Image Gallery */}
                      <div className="relative h-64 overflow-hidden">
                        <motion.img
                          key={currentImage}
                          src={currentImage}
                          alt={companion.name}
                          initial={{ opacity: 0 }}
                          animate={{ opacity: 1 }}
                          transition={{ duration: 0.3 }}
                          className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                        />
                        <div className="absolute inset-0 bg-gradient-to-t from-dark-bg/80 to-transparent" />

                        {/* Navigation Buttons */}
                        <div className="absolute inset-0 flex items-center justify-between px-2 opacity-0 group-hover:opacity-100 transition-opacity">
                          <motion.button
                            onClick={handlePrevImage}
                            className="bg-gold/20 hover:bg-gold/40 backdrop-blur-md p-2 rounded-full text-gold transition-colors"
                            whileHover={{ scale: 1.1 }}
                            whileTap={{ scale: 0.95 }}
                          >
                            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
                            </svg>
                          </motion.button>
                          <motion.button
                            onClick={handleNextImage}
                            className="bg-gold/20 hover:bg-gold/40 backdrop-blur-md p-2 rounded-full text-gold transition-colors"
                            whileHover={{ scale: 1.1 }}
                            whileTap={{ scale: 0.95 }}
                          >
                            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                            </svg>
                          </motion.button>
                        </div>

                        {/* Image Counter */}
                        <div className="absolute bottom-3 left-1/2 transform -translate-x-1/2 bg-dark-bg/60 backdrop-blur-md px-3 py-1 rounded-full text-xs text-gold border border-gold/30">
                          {currentImageIndex + 1}/{companion.gallery.length}
                        </div>

                        {/* Image Dots */}
                        <div className="absolute bottom-3 right-3 flex gap-1">
                          {companion.gallery.map((_, idx) => (
                            <motion.button
                              key={idx}
                              onClick={(e) => {
                                e.preventDefault()
                                setImageIndices((prev) => ({
                                  ...prev,
                                  [companion.id]: idx,
                                }))
                              }}
                              className={`w-2 h-2 rounded-full transition-colors ${
                                idx === currentImageIndex ? 'bg-gold' : 'bg-gold/40'
                              }`}
                              whileHover={{ scale: 1.2 }}
                            />
                          ))}
                        </div>
                      </div>

                      {/* Info */}
                      <div className="p-6">
                        <h3 className="text-2xl font-serif font-bold text-gold mb-2">
                          {companion.name}
                        </h3>
                        <p className="text-sm text-gray-400 mb-3">{companion.description}</p>
                        <div className="flex justify-between text-xs text-gray-300 mb-4">
                          <span>Age: {companion.age}</span>
                          <span>üìç {companion.location}</span>
                        </div>
                        <motion.button
                          whileHover={{ x: 5 }}
                          className="text-gold text-sm font-semibold hover:text-gold/80 transition-colors"
                        >
                          View Profile ‚Üí
                        </motion.button>
                      </div>
                    </motion.div>
                  </Link>
                </motion.div>
              )
            })}
          </motion.div>

          <motion.div
            initial={{ opacity: 0 }}
            whileInView={{ opacity: 1 }}
            viewport={{ once: true }}
            className="text-center mt-12"
          >
            <Link to="/escorts">
              <motion.button
                whileHover={{ scale: 1.05 }}
                whileTap={{ scale: 0.95 }}
                className="btn-gold text-lg mx-auto"
              >
                View All Escorts
              </motion.button>
            </Link>
          </motion.div>
        </div>
      </section>

      {/* Why Choose Us Section */}
      <section className="py-20 bg-dark-card border-t border-gold/10">
        <div className="max-w-6xl mx-auto px-4 md:px-6">
          <motion.div
            variants={containerVariants}
            initial="hidden"
            whileInView="visible"
            viewport={{ once: true }}
            className="text-center mb-12"
          >
            <motion.h2 variants={itemVariants} className="section-title">
              Why Choose Us
            </motion.h2>
          </motion.div>

          <motion.div
            variants={containerVariants}
            initial="hidden"
            whileInView="visible"
            viewport={{ once: true }}
            className="grid md:grid-cols-3 gap-8"
          >
            {reasons.map((reason, index) => (
              <motion.div
                key={index}
                variants={itemVariants}
                whileHover={{ y: -5 }}
                className="card-glass p-8 text-center"
              >
                <div className="text-5xl mb-4">{reason.icon}</div>
                <h3 className="text-xl font-serif font-bold text-gold mb-3">
                  {reason.title}
                </h3>
                <p className="text-gray-400 text-sm leading-relaxed">
                  {reason.description}
                </p>
              </motion.div>
            ))}
          </motion.div>
        </div>
      </section>

      {/* Testimonials Section */}
      <section className="py-20 bg-dark-bg border-t border-gold/10">
        <div className="max-w-6xl mx-auto px-4 md:px-6">
          <motion.div
            variants={containerVariants}
            initial="hidden"
            whileInView="visible"
            viewport={{ once: true }}
            className="text-center mb-12"
          >
            <motion.h2 variants={itemVariants} className="section-title">
              Client Testimonials
            </motion.h2>
          </motion.div>

          <motion.div
            variants={containerVariants}
            initial="hidden"
            whileInView="visible"
            viewport={{ once: true }}
            className="grid md:grid-cols-3 gap-8"
          >
            {testimonials.map((testimonial, index) => (
              <motion.div
                key={index}
                variants={itemVariants}
                className="card-glass p-8 flex flex-col"
              >
                <div className="flex gap-1 mb-4">
                  {[...Array(testimonial.rating)].map((_, i) => (
                    <motion.span
                      key={i}
                      initial={{ opacity: 0, scale: 0 }}
                      whileInView={{ opacity: 1, scale: 1 }}
                      transition={{ delay: i * 0.1 }}
                      className="text-gold"
                    >
                      ‚òÖ
                    </motion.span>
                  ))}
                </div>
                <p className="text-gray-300 text-sm mb-4 flex-grow">
                  "{testimonial.text}"
                </p>
                <p className="font-serif font-bold text-gold text-sm">
                  ‚Äî {testimonial.name}
                </p>
              </motion.div>
            ))}
          </motion.div>
        </div>
      </section>

      {/* Locations Section */}
      <section className="py-20 bg-dark-card border-t border-gold/10">
        <div className="max-w-6xl mx-auto px-4 md:px-6">
          <motion.div
            variants={containerVariants}
            initial="hidden"
            whileInView="visible"
            viewport={{ once: true }}
            className="text-center mb-12"
          >
            <motion.h2 variants={itemVariants} className="section-title">
              Our Locations
            </motion.h2>
            <motion.p variants={itemVariants} className="text-gray-400 text-lg mt-4">
              Premium escort services available in major cities across India
            </motion.p>
          </motion.div>

          <motion.div
            variants={containerVariants}
            initial="hidden"
            whileInView="visible"
            viewport={{ once: true }}
            className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"
          >
            {cities.map((city, index) => (
              <motion.div key={city} variants={itemVariants}>
                <Link to={`/companions?location=${city}`}>
                  <motion.div
                    whileHover={{ y: -5, scale: 1.05 }}
                    whileTap={{ scale: 0.95 }}
                    className="card-glass p-4 text-center cursor-pointer group relative"
                  >
                    <div className="text-2xl mb-2">üìç</div>
                    <h3 className="text-sm font-semibold text-white group-hover:text-gold transition-colors">
                      {city}
                    </h3>
                    <div className="opacity-0 group-hover:opacity-100 transition-opacity mt-1">
                      <span className="text-xs text-gold">View Companions ‚Üí</span>
                    </div>
                  </motion.div>
                </Link>
              </motion.div>
            ))}
          </motion.div>

          {/* Quick Action: View All */}
          <motion.div
            initial={{ opacity: 0 }}
            whileInView={{ opacity: 1 }}
            viewport={{ once: true }}
            className="text-center mt-8"
          >
            <p className="text-gray-400 text-sm mb-4">
              Click any city to view available escorts in that location
            </p>
            <Link to="/escorts">
              <motion.button
                whileHover={{ scale: 1.05 }}
                whileTap={{ scale: 0.95 }}
                className="btn-gold text-lg mx-auto"
              >
                View All Escorts
              </motion.button>
            </Link>
          </motion.div>
        </div>
      </section>

      {/* CTA Section */}
      <section className="py-20 bg-dark-card border-t border-gold/10">
        <div className="max-w-4xl mx-auto px-4 md:px-6 text-center">
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            whileInView={{ opacity: 1, y: 0 }}
            viewport={{ once: true }}
            className="space-y-6"
          >
            <h2 className="section-title">Ready for an Unforgettable Experience?</h2>
            <p className="text-xl text-gray-300">
              Book your exclusive companionship today and discover the difference luxury makes.
            </p>
            <Link to="/booking">
              <motion.button
                whileHover={{ scale: 1.05 }}
                whileTap={{ scale: 0.95 }}
                className="btn-gold"
              >
                Book Your Escort Now
              </motion.button>
            </Link>
          </motion.div>
        </div>
      </section>
    </>
  )
}

export default Home
